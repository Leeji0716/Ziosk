<!DOCTYPE html>
<html layout:decorate="~{layout}" lang="en" xmlns:th="http://www.w3.org/1999/xhtml"
      xmlns:layout="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>제품 등록</title>
</head>
<body>
<div layout:fragment="content" class="container">
    <form th:object="${productForm}" method="post">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <div th:replace="~{form_errors :: formErrorsFragment}"></div>
        <div class="flex justify-center items-center gap-8">
            <div class="flex flex-col gap-3">
                <div class="mb-3">
                    <label for="product" class="form-label">제품명</label>
                    <input type="text" th:field="*{product}" placeholder="제품명을 입력해주세요." id="product" class="input input-bordered w-full max-w-xs" />
                </div>
                <div class="mb-3">
                    <label for="price" class="form-label">가격</label>
                    <input type="number" th:field="*{price}" placeholder="가격을 입력해주세요." id="price" class="input input-bordered w-full max-w-xs" />
                </div>
                <div class="mb-3">
                    <label for="image" class="form-label">이미지 경로</label>
                    <input type="text" th:field="*{image}" placeholder="이미지 경로를 입력해주세요." id="image" class="input input-bordered w-full max-w-xs" />
                </div>
                <div class="mb-3">
                    <label for="category" class="form-label">카테고리</label>
                    <select id="category" th:field="*{categoryID}" class="input input-bordered w-full max-w-xs">
                        <option th:each="category : ${categoryList}" th:value="${category.id}" th:text="${category.name}"></option>
                    </select>
                </div>
                <input type="submit" value="저장하기" class="btn btn-primary my-2">
                <a th:if="${id != null}" href="javascript:void(0);" th:data-uri="@{|/product/delete/${id}|}"
                   class="delete btn btn-error my-2">삭제</a>
            </div>
            <div class="card w-96 bg-base-100 shadow-xl gap-3">
                <figure class="px-10 pt-10">
                    <img th:src="*{image}" alt="Empty" class="rounded-xl" width="100" height="200"/>
                </figure>
                <div class="card-body items-center text-center">
                    <h2 class="card-title" th:text="*{product}"></h2>
                    <p class="card-text" th:text="*{price} + '원'"></p>
                </div>
            </div>
        </div>
    </form>
    <script>
        const delete_elements = document.getElementsByClassName("delete");
        Array.from(delete_elements).forEach(function(element) {
            element.addEventListener('click', function() {
                if(confirm("정말로 삭제하시겠습니까?")) {
                    location.href = this.dataset.uri;
                };
            });
        });
    </script>
</div>
</body>
</html>